/* *
 * year-month-date-selector-plugin v1.0.0 @sh
 * */
$.fn.yearMonthDateSelector=function(t){var e=this,n={year:$(this).find("select:eq(0)"),month:$(this).find("select:eq(1)"),date:$(this).find("select:eq(2)"),formatYear:"西元{{year}}年",formatMonth:"{{month}}月",formatDate:"{{date}}日",maxYear:null,minYear:1900};$.extend(n,t),e._init=function(){return 1!==n.year.length||1!==n.month.length||1!==n.date.length?(window.console&&console.log("無法取得元素"),!1):(e.setYearOption(),0===n.month.find("option").length&&e.setMonthOption(),void(0===n.date.find("option").length&&e.setDateOption()))},e._initEvent=function(){n.year.unbind("change").on("change",function(){e.setMonthOption(),e.setDateOption()}),n.month.unbind("change").on("change",function(){e.setDateOption()})},e.setYearOption=function(){if((isNaN(n.maxYear)||n.maxYear>(new Date).getFullYear()||n.maxYear<n.minYear)&&(n.maxYear=(new Date).getFullYear()),0===n.year.find("option").length||n.year.find("option:eq(0)").val()!==n.maxYear||n.year.find("option:eq(-1)").val()!==n.minYear){n.month.empty();for(var t=n.maxYear;t>=n.minYear;t--)n.year.append($("<option>").val(t).text(n.formatYear.replace(/{{year}}/g,t)))}},e.setMonthOption=function(){if(n.month.find("option").length<12){n.month.empty();for(var t=1;t<=12;t++)n.month.append($("<option>").val(t).text(n.formatMonth.replace(/{{month}}/g,t)))}},e.setDateOption=function(){var t=parseInt(n.year.val(),10),e=parseInt(n.month.val(),10),a=parseInt(n.date.val(),10);if(isNaN(e)||isNaN(t))return!1;var o=31;4===e||6===e||9===e||11===e?o=30:2===e&&(o=t%4!=0||t%100==0&&t%400!=0?29:28),n.date.empty();for(var i=1;i<=o;i++)n.date.append($("<option>").val(i).text(n.formatDate.replace(/{{date}}/g,i)));n.date.find("option:eq("+(a<o?a-1:o-1)+")").prop("selected",!0)},e._init(),e._initEvent()};